<div class="container w-100">
  <div class="row w-100 d-flex justify-content-center">
    <div class="col-12">
      <h2 class="text-center text-white display-4">Search your Heroe!</h2>
    </div>
    <div class="col-12 d-flex justify-content-center mb-5">
      <input
        type="text"
        class="w-100 text-center forma mt-5 form-control"
        (ngModelChange)="search($event)"
        [(ngModel)]="src"
        placeholder="Batman"
      />
    </div>

    <div
      class="card bg-dark col-md-6 mt-3 mb-3"
      style="width: 20rem"
      *ngFor="let champ of champs"
    >
      <img
        [src]="champ.image.url"
        (error)="changeSource($event)"
        class="card-img-top img-fluid p-3"
      />
      <div class="container-fluid card-img-overlay p-5">
        <h5 class="card-title text-center text-white display-5 mb-md-4">PowerStats</h5>
        <div class="progress mb-lg-5 mb-3">
          <div
            class="progress-bar"
            role="progressbar"
            [style.width.%]="champ.powerstats.combat | defaulNumberNull"
            aria-valuenow="25"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            Combat: {{ champ.powerstats.combat }}%
          </div>
        </div>
        <div class="progress mb-lg-5 mb-3">
          <div
            class="progress-bar bg-success"
            role="progressbar"
            [style.width.%]="champ.powerstats.durability | defaulNumberNull"
            aria-valuenow="25"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            Durability: {{ champ.powerstats.durability }}%
          </div>
        </div>
        <div class="progress mb-lg-5 mb-3">
          <div
            class="progress-bar bg-info"
            role="progressbar"
            [style.width.%]="champ.powerstats.intelligence | defaulNumberNull"
            aria-valuenow="25"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            Intelligence: {{ champ.powerstats.intelligence }}%
          </div>
        </div>
        <div class="progress mb-lg-5 mb-3">
          <div
            class="progress-bar bg-warning"
            role="progressbar"
            [style.width.%]="champ.powerstats.power | defaulNumberNull"
            aria-valuenow="25"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            Power: {{ champ.powerstats.power }}%
          </div>
        </div>
        <div class="progress mb-lg-5 mb-3">
          <div
            class="progress-bar bg-danger"
            role="progressbar"
            [style.width.%]="champ.powerstats.speed | defaulNumberNull"
            aria-valuenow="25"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            Speed: {{ champ.powerstats.speed }}%
          </div>
        </div>
        <div class="progress mb-lg-5 mb-3">
          <div
            class="progress-bar bg-secondary"
            role="progressbar"
            [style.width.%]="champ.powerstats.strength | defaulNumberNull"
            aria-valuenow="25"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            Strength: {{ champ.powerstats.strength }}%
          </div>
        </div>
        <div class="d-flex justify-content-center mt-lg-5">
          <button
            class="btn btn-outline-success"
            (click)="addTeam(champ)"
            placement="top"
          >
            Add Team
          </button>
          <button
            class="btn btn-outline-light ms-2 text-nowrap"
            (click)="viewDetails(champ, cont)"
          >
            View more
          </button>
        </div>
      </div>
      <div class="card-body">
        <h3 class="card-title text-white text-center">{{ champ.name }}</h3>
        <h3
          class="card-title text-center"
          [ngClass]="{
            'text-success': champ.biography.alignment === 'good',
            'text-danger': champ.biography.alignment === 'bad'
          }"
        >
          {{ champ.biography.alignment }}
        </h3>
      </div>
    </div>
  </div>
</div>

<ng-template #cont let-modal>
  <div class="bg-dark text-white">
    <div class="modal-header">
      <h4 class="modal-title">
        {{ selectedChamp.name }} - {{ selectedChamp.biography.fullname }}
      </h4>
      <button
        class="btn-close btn-close-white"
        type="button"
        (click)="modal.dismiss()"
      ></button>
    </div>
    <div class="modal-body">
      <div>
        <h3>Biography</h3>
        <p>Location: {{ selectedChamp.work.base }}</p>
        <p>Ocupation: {{ selectedChamp.work.ocupation }}</p>
        <p>Family: {{ selectedChamp.connections.relatives }}</p>
        <p>Affiliation: {{ selectedChamp.connections.group - affiliation }}</p>
      </div>
    </div>
  </div>
</ng-template>
